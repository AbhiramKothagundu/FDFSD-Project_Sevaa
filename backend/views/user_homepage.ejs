<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User Homepage</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="/css/user_homepage.css" />
    <link rel="stylesheet" href="/css/requests.css" />
    <link rel="stylesheet" href="/css/user_homepage_posts.css">
    <!-- Add Tailwind CSS if you want to use the original Meraki UI component -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="/js/user_homepage.js"></script>
    <script src="/js/user_homepage_topRight.js"></script>
    <script src="/js/user_homepage_posts.js"></script>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="#">User Dashboard</a>
        <a class="navbar-brand" href="#" onclick="showPosts(event)">Posts</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <span class="nav-link">Hi, <%= user.username %></span>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/auth/u_logout">Logout</a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Page content layout with Meraki sidebar -->
    <div class="container-fluid">
        <div class="row">


            <!-- Main content section -->
            <div class="col-lg-12 d-flex">
                <!-- Existing page structure with posts, etc. -->
                <div class="row row-equal page-container w-100">
                    <!-- Main page content -->
                    <div class="col-lg-6 left-section">

            <!-- Left section: Meraki Component (sidebar) -->
            <aside class="col-lg-1">
                <div class="flex flex-col items-center h-screen py-8 space-y-8 bg-white dark:bg-gray-900 dark:border-gray-700">
                    <a href="#">
                        <img class="w-auto h-6" src="https://merakiui.com/images/logo.svg" alt="">
                    </a>

                    <!-- Icons in the sidebar -->
                    <a href="#" class="p-1.5 text-gray-500 focus:outline-nones transition-colors duration-200 rounded-lg dark:text-gray-400 dark:hover:bg-gray-800 hover:bg-gray-100">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
                        </svg>
                    </a>

                    <!-- More links/icons from Meraki UI -->
                    <a href="#" class="p-1.5 text-blue-500 transition-colors duration-200 bg-blue-100 rounded-lg dark:text-blue-400 dark:bg-gray-800">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z" />
                        </svg>
                    </a>
                    <!-- Add more icons as needed -->
                </div>
            </aside>

                        <div class="h-screen py-8 overflow-y-auto bg-white border-l border-r sm:w-64 w-60 dark:bg-gray-900 dark:border-gray-700">
                            <h2 class="px-5 text-lg font-medium text-gray-800 dark:text-white">Accounts</h2>
                        
                            <div class="mt-8 space-y-4">
                                <% donorList.forEach(donorUsername => { %>
                                <button class="flex items-center w-full px-5 py-2 transition-colors duration-200 dark:hover:bg-gray-800 gap-x-2 hover:bg-gray-100 focus:outline-none" onclick="fetchRequests('<%= donorUsername %>')">
                                    <div class="relative">
                                        <span class="object-cover w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center text-white font-bold">
                                            <%= donorUsername.charAt(0) %>
                                        </span>
                                        <!-- Add a status dot here if needed, similar to the sample layout -->
                                    </div>
                        
                                    <div class="text-left rtl:text-right">
                                        <h1 class="text-sm font-medium text-gray-700 capitalize dark:text-white"><%= donorUsername %></h1>
                                    </div>
                                </button>
                                <% }); %>
                            </div>
                        </div>
                        
                        <div id="main-content" class="main-content">
                            <h3>Chat with a Donor</h3>
                            <p>lorem ipsum</p>
                        </div>
                    </div>

                    <!-- Right section: Two equal parts -->
                    <div class="col-lg-6 d-flex flex-column">
                        <div class="top-right-section">
                            <h3>Top Right Section</h3>
                            <p>This is the top-right part of the page content.</p>
                        </div>
                        <div class="bottom-right-section">
                            <h3>Bottom Right Section</h3>
                            <p>This is the bottom-right part of the page content.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Posts Section -->
    <div id="posts-section">
      <h3>All Posts</h3>
      <div>
          <button onclick="filterPosts('all')" class="btn btn-info">All Deals</button>
          <button onclick="filterPosts('active')" class="btn btn-success">Active Deals</button>
          <button onclick="filterPosts('closed')" class="btn btn-danger">Closed Deals</button>
      </div>
      <div id="posts-list">
          <!-- Posts will be dynamically loaded here -->
      </div>
      <button onclick="hidePosts()" class="btn btn-secondary">Close</button>
  </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
